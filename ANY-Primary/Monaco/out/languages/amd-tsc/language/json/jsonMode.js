var __extends=this&&this.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__createBinding=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t);var o=Object.getOwnPropertyDescriptor(n,t);o&&!("get"in o?!n.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,o)}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),__exportStar=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||__createBinding(n,e,t)};define(["require","exports","./workerManager","../common/lspLanguageFeatures","./tokenization","../../fillers/monaco-editor-core","./workerManager","../common/lspLanguageFeatures"],(function(e,n,t,r,o,i,a,s){"use strict";var u;Object.defineProperty(n,"__esModule",{value:!0}),n.WorkerManager=n.setupMode=n.getWorker=void 0,n.getWorker=function(){return new Promise((function(e,n){if(!u)return n("JSON not registered!");e(u)}))};var g=function(e){function n(n,t,r){var o=e.call(this,n,t,r.onDidChange)||this;return o._disposables.push(i.editor.onWillDisposeModel((function(e){o._resetSchema(e.uri)}))),o._disposables.push(i.editor.onDidChangeModelLanguage((function(e){o._resetSchema(e.model.uri)}))),o}return __extends(n,e),n.prototype._resetSchema=function(e){this._worker().then((function(n){n.resetSchema(e.toString())}))},n}(r.DiagnosticsAdapter);function c(e){return{dispose:function(){return d(e)}}}function d(e){for(;e.length;)e.pop().dispose()}n.setupMode=function(e){var n=[],a=[],s=new t.WorkerManager(e);function l(){var n=e.languageId,t=e.modeConfiguration;d(a),t.documentFormattingEdits&&a.push(i.languages.registerDocumentFormattingEditProvider(n,new r.DocumentFormattingEditProvider(u))),t.documentRangeFormattingEdits&&a.push(i.languages.registerDocumentRangeFormattingEditProvider(n,new r.DocumentRangeFormattingEditProvider(u))),t.completionItems&&a.push(i.languages.registerCompletionItemProvider(n,new r.CompletionAdapter(u,[" ",":",'"']))),t.hovers&&a.push(i.languages.registerHoverProvider(n,new r.HoverAdapter(u))),t.documentSymbols&&a.push(i.languages.registerDocumentSymbolProvider(n,new r.DocumentSymbolAdapter(u))),t.tokens&&a.push(i.languages.setTokensProvider(n,(0,o.createTokenizationSupport)(!0))),t.colors&&a.push(i.languages.registerColorProvider(n,new r.DocumentColorAdapter(u))),t.foldingRanges&&a.push(i.languages.registerFoldingRangeProvider(n,new r.FoldingRangeAdapter(u))),t.diagnostics&&a.push(new g(n,u,e)),t.selectionRanges&&a.push(i.languages.registerSelectionRangeProvider(n,new r.SelectionRangeAdapter(u)))}n.push(s),u=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return s.getLanguageServiceWorker.apply(s,e)},l(),n.push(i.languages.setLanguageConfiguration(e.languageId,p));var f=e.modeConfiguration;return e.onDidChange((function(e){e.modeConfiguration!==f&&(f=e.modeConfiguration,l())})),n.push(c(a)),c(n)};var p={wordPattern:/(-?\d*\.\d\w*)|([^\[\{\]\}\:\"\,\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"]],autoClosingPairs:[{open:"{",close:"}",notIn:["string"]},{open:"[",close:"]",notIn:["string"]},{open:'"',close:'"',notIn:["string"]}]};Object.defineProperty(n,"WorkerManager",{enumerable:!0,get:function(){return a.WorkerManager}}),__exportStar(s,n)}));